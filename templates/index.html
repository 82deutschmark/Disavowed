{% extends "base.html" %}

{% block title %}Disavowed: Choose Your Espionage Adventure{% endblock %}

{% block content %}
<div class="hero-section">
    <div class="container">
        <div class="row align-items-center min-vh-100">
            <div class="col-lg-6">
                <div class="hero-content">
                    <h1 class="display-3 fw-bold text-white mb-4">
                        <span class="text-danger">DISAVOWED</span>
                    </h1>
                    <p class="lead text-light mb-4">
                        You're a rogue agent, cast out by your own agency after one too many "unconventional" operations. 
                        With limited resources and enemies closing in, survival depends on your choices. But really, what else is new?
                    </p>
                    <p class="text-light mb-5">
                        Navigate through dangerous missions, manage your currencies wisely, and make the bold decisions 
                        that could save your life... or end it spectacularly.
                    </p>
                    
                    <div class="hero-actions">
                        {% if current_user.is_authenticated %}
                            <div class="mb-4">
                                <div class="alert alert-success d-inline-block">
                                    <i class="fas fa-user-check me-2"></i>Welcome back, Agent {{ current_user.name }}!
                                    <br><small><i class="fas fa-gem me-1"></i>{{ current_user.diamonds }} diamonds available</small>
                                </div>
                            </div>
                        {% else %}
                            <div class="mb-4">
                                <div class="alert alert-warning d-inline-block">
                                    <i class="fas fa-exclamation-triangle me-2"></i>Playing as Guest
                                    <br><small>Login to save your progress permanently</small>
                                </div>
                            </div>
                        {% endif %}
                        
                        <div class="d-flex flex-wrap gap-3">
                            <a href="{{ url_for('start_game') }}" class="btn btn-danger btn-lg">
                                <i class="fas fa-play me-2"></i>Start Mission
                            </a>
                            {% if session.user_id %}
                                <a href="{{ url_for('game') }}" class="btn btn-outline-light btn-lg">
                                    <i class="fas fa-forward me-2"></i>Continue
                                </a>
                            {% endif %}
                            {% if not current_user.is_authenticated %}
                                <a href="{{ url_for('google_auth.login') }}" class="btn btn-success btn-lg">
                                    <i class="fab fa-google me-2"></i>Login & Save
                                </a>
                            {% else %}
                                <a href="{{ url_for('payments.buy_diamonds') }}" class="btn btn-warning btn-lg">
                                    <i class="fas fa-gem me-2"></i>Buy Diamonds
                                </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-6">
                <div class="hero-features">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <h4>Multi-Currency System</h4>
                        <p>Manage diamonds ðŸ’Ž, dollars ðŸ’µ, pounds ðŸ’·, euros ðŸ’¶, and yen ðŸ’´ strategically</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h4>AI-Generated Stories</h4>
                        <p>Every choice leads to dynamically generated narratives powered by advanced AI</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-route"></i>
                        </div>
                        <h4>4-Tier Choice System</h4>
                        <p>Three AI choices plus your own custom input for maximum creativity</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% if characters %}
<section class="characters-preview py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="display-5 text-white">Meet Your Contacts</h2>
                <p class="lead text-light">The operatives, informants, and adversaries you'll encounter</p>
            </div>
        </div>
        
        <div class="row g-4">
            {% for character in characters %}
                <div class="col-md-4 col-lg-2">
                    <div class="character-card">
                        {% if character.image_url %}
                            <div class="character-image">
                                <img src="{{ character.image_url }}" alt="{{ character.character_name }}" class="img-fluid">
                            </div>
                        {% else %}
                            <div class="character-placeholder">
                                <i class="fas fa-user-secret"></i>
                            </div>
                        {% endif %}
                        <div class="character-info">
                            <h5 class="character-name">{{ character.character_name }}</h5>
                            <p class="character-role">{{ character.character_role|title }}</p>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

{% if error %}
<section class="error-section py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8 text-center">
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    {{ error }}
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}
{% endblock %}
